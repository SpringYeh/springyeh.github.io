<!DOCTYPE html>
<html lang="zh"><head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="author" content=""><title>解决冲突 - Wiki | 一叶知秋</title><script>
  var _hmt = _hmt || [];
  (function() {
    var hm = document.createElement("script");
    hm.src = "https://hm.baidu.com/hm.js?f5d6cbe800b85fe8f7d5f2a9a9fb22d6";
    var s = document.getElementsByTagName("script")[0]; 
    s.parentNode.insertBefore(hm, s);
  })();
</script>
  <meta name="keywords" content="一叶知秋, 原创博客,生活, cinzano, Jekyll, blog">
  <meta name="description" content="一叶知秋|日常|PAT|书|少女与猫|诗词集"><link rel="stylesheet" href="https://at.alicdn.com/t/font_1572012_xhxate8uig.css">
<link rel="stylesheet" href="/assets/main.css?v=0.1.7" />
<link rel="stylesheet" href="/assets/css/custom.css" />

<script src="/assets/js/main.js?v=0.1.7" defer></script>
<script src="https://cdnjs.loli.net/ajax/libs/jquery/3.2.1/jquery.min.js"></script><!-- 原样式 -->
<link rel="stylesheet" href="https://cdn.staticfile.org/highlight.js/9.18.1/styles/monokai-sublime.min.css" />
<script src="/assets/js/highlight.js"></script>
<script>hljs.initHighlightingOnLoad();</script><script src="https://unpkg.com/mermaid@7.1.0/dist/mermaid.min.js" defer></script></head>

<body class="body-chapter">
	<script>
  if ('Wiki' == '诗') {
    $('body').addClass("poem-page");
    // console.log( 'Wiki' );
  } else if ('Wiki' == '万事集') {
    $('body').addClass("tale-page");
    // console.log( 'Wiki' );
  }
</script>

<div class="book__wrapper sidebar-right" id="bookMain"><div class="book-summary" id="bookSummary">
  <nav role="navigation">
    <ul class="summary">
      <li class="chapter ">
        <a href="/wiki/" class="custom-link">Wiki</a>
      </li>
      <li class="divider"></li><li class="chapter "><a href="/wiki/git.html">廖雪峰的Git教程</a><ul class="articles"><li class="chapter ">
            <a href="/wiki/git/1.html">安装Git</a>
          </li><li class="chapter ">
            <a href="/wiki/git/2.html">创建版本库(repository)</a>
          </li><li class="chapter ">
            <a href="/wiki/git/3.html">时光机穿梭</a>
          </li><li class="chapter ">
            <a href="/wiki/git/4.html">版本回退</a>
          </li><li class="chapter ">
            <a href="/wiki/git/5.html">工作区和暂存区</a>
          </li><li class="chapter ">
            <a href="/wiki/git/6.html">管理修改</a>
          </li><li class="chapter ">
            <a href="/wiki/git/7.html">撤销修改</a>
          </li><li class="chapter ">
            <a href="/wiki/git/8.html">删除文件</a>
          </li><li class="chapter ">
            <a href="/wiki/git/9.html">远程仓库</a>
          </li><li class="chapter ">
            <a href="/wiki/git/10.html">添加远程库</a>
          </li><li class="chapter ">
            <a href="/wiki/git/11.html">从远程库克隆</a>
          </li><li class="chapter ">
            <a href="/wiki/git/12.html">创建与合并分支</a>
          </li><li class="chapter active">
            <a href="/wiki/git/13.html">解决冲突</a>
          </li><li class="chapter ">
            <a href="/wiki/git/14.html">分支管理策略</a>
          </li><li class="chapter ">
            <a href="/wiki/git/15.html">Bug分支</a>
          </li><li class="chapter ">
            <a href="/wiki/git/16.html">Feature分支</a>
          </li><li class="chapter ">
            <a href="/wiki/git/17.html">多人协作</a>
          </li><li class="chapter ">
            <a href="/wiki/git/18.html">Rebase</a>
          </li><li class="chapter ">
            <a href="/wiki/git/19.html">使用GitHub</a>
          </li></ul></li></ul>
  </nav>
</div>
<div class="book__body">
    <div class="body__inner"><a href="/" class="logo"><img src="/assets/img/logo.svg" class="logo_img"><h1>一叶知秋</h1>
</a><a href="/archive.html" class="sidebar__toggler">
  <span class="sidebar__toggler_top"></span>
  <span class="sidebar__toggler_middle"></span>
  <span class="sidebar__toggler_bottom"></span>
</a><div class="book-header" role="navigation">
    <a href="#" id="summaryToggler" class="summary__toggler">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
  <circle cx="12" cy="12" r="1"></circle>
  <circle cx="19" cy="12" r="1"></circle>
  <circle cx="5" cy="12" r="1"></circle>
</svg>

    </a>
<!--   <h1>
    解决冲突 - Wiki
  </h1> -->
</div><main class="chapter__wrapper" tabindex="-1" role="main">
        <div class="chapter__inner">
          <article class="chapter__content content">
            <h1 id="解决冲突">解决冲突</h1>

<p>人生不如意之事十之八九，合并分支往往也不是一帆风顺的。</p>

<p>准备新的<code class="highlighter-rouge">feature1</code>分支，继续我们的新分支开发：</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ git switch -c feature1
Switched to a new branch 'feature1'
</code></pre></div></div>

<p>修改<code class="highlighter-rouge">readme.txt</code>最后一行，改为：</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Creating a new branch is quick AND simple.
</code></pre></div></div>

<p>在<code class="highlighter-rouge">feature1</code>分支上提交：</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ git add readme.txt

$ git commit -m "AND simple"
[feature1 14096d0] AND simple
 1 file changed, 1 insertion(+), 1 deletion(-)
</code></pre></div></div>

<p>切换到<code class="highlighter-rouge">master</code>分支：</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ git switch master
Switched to branch 'master'
Your branch is ahead of 'origin/master' by 1 commit.
  (use "git push" to publish your local commits)
</code></pre></div></div>

<p>Git还会自动提示我们当前<code class="highlighter-rouge">master</code>分支比远程的<code class="highlighter-rouge">master</code>分支要超前1个提交。</p>

<p>在<code class="highlighter-rouge">master</code>分支上把<code class="highlighter-rouge">readme.txt</code>文件的最后一行改为：</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Creating a new branch is quick &amp; simple.
</code></pre></div></div>

<p>提交：</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ git add readme.txt 
$ git commit -m "&amp; simple"
[master 5dc6824] &amp; simple
 1 file changed, 1 insertion(+), 1 deletion(-)
</code></pre></div></div>

<p>现在，<code class="highlighter-rouge">master</code>分支和<code class="highlighter-rouge">feature1</code>分支各自都分别有新的提交，变成了这样：</p>

<p><img src="/assets/img/book//%E8%A7%A3%E5%86%B3%E5%86%B2%E7%AA%81.assets/0-16403371858042.png" alt="git-br-feature1"></p>

<p>这种情况下，Git无法执行“快速合并”，只能试图把各自的修改合并起来，但这种合并就可能会有冲突，我们试试看：</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ git merge feature1
Auto-merging readme.txt
CONFLICT (content): Merge conflict in readme.txt
Automatic merge failed; fix conflicts and then commit the result.
</code></pre></div></div>

<p>果然冲突了！Git告诉我们，<code class="highlighter-rouge">readme.txt</code>文件存在冲突，必须手动解决冲突后再提交。<code class="highlighter-rouge">git status</code>也可以告诉我们冲突的文件：</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ git status
On branch master
Your branch is ahead of 'origin/master' by 2 commits.
  (use "git push" to publish your local commits)

You have unmerged paths.
  (fix conflicts and run "git commit")
  (use "git merge --abort" to abort the merge)

Unmerged paths:
  (use "git add &lt;file&gt;..." to mark resolution)

	both modified:   readme.txt

no changes added to commit (use "git add" and/or "git commit -a")
</code></pre></div></div>

<p>我们可以直接查看readme.txt的内容：</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Git is a distributed version control system.
Git is free software distributed under the GPL.
Git has a mutable index called stage.
Git tracks changes of files.
&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD
Creating a new branch is quick &amp; simple.
=======
Creating a new branch is quick AND simple.
&gt;&gt;&gt;&gt;&gt;&gt;&gt; feature1
</code></pre></div></div>

<p>Git用<code class="highlighter-rouge">&lt;&lt;&lt;&lt;&lt;&lt;&lt;</code>，<code class="highlighter-rouge">=======</code>，<code class="highlighter-rouge">&gt;&gt;&gt;&gt;&gt;&gt;&gt;</code>标记出不同分支的内容，我们修改如下后保存：</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Creating a new branch is quick and simple.
</code></pre></div></div>

<p>再提交：</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ git add readme.txt 
$ git commit -m "conflict fixed"
[master cf810e4] conflict fixed
</code></pre></div></div>

<p>现在，<code class="highlighter-rouge">master</code>分支和<code class="highlighter-rouge">feature1</code>分支变成了下图所示：</p>

<p><img src="/assets/img/book//%E8%A7%A3%E5%86%B3%E5%86%B2%E7%AA%81.assets/0.png" alt="git-br-conflict-merged"></p>

<p>用带参数的<code class="highlighter-rouge">git log</code>也可以看到分支的合并情况：</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ git log --graph --pretty=oneline --abbrev-commit
*   cf810e4 (HEAD -&gt; master) conflict fixed
|\  
| * 14096d0 (feature1) AND simple
* | 5dc6824 &amp; simple
|/  
* b17d20e branch test
* d46f35e (origin/master) remove test.txt
* b84166e add test.txt
* 519219b git tracks changes
* e43a48b understand how stage works
* 1094adb append GPL
* e475afc add distributed
* eaadf4e wrote a readme file
</code></pre></div></div>

<p>最后，删除<code class="highlighter-rouge">feature1</code>分支：</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ git branch -d feature1
Deleted branch feature1 (was 14096d0).
</code></pre></div></div>

<p>工作完成。</p>

<hr>

<h3 id="小结">小结</h3>

<p>当Git无法自动合并分支时，就必须首先解决冲突。解决冲突后，再提交，合并完成。</p>

<p>解决冲突就是把Git合并失败的文件手动编辑为我们希望的内容，再提交。</p>

<p>用<code class="highlighter-rouge">git log --graph</code>命令可以看到分支合并图。</p>

          </article>
        </div><footer class="site-footer">
  © 2022<a href="/">一叶知秋</a>. All rights reserved.
</footer>
</main>
    </div><a href="/wiki/git/12.html" class="navigation navigation-prev"
      aria-label="Previous page: 创建与合并分支"><svg viewBox="0 0 32 32" width="32" height="32" fill="none" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2">
  <path d="M20 30 L8 16 20 2" />
</svg>
</a><a href="/wiki/git/14.html" class="navigation navigation-next"
      aria-label="Next page: 分支管理策略"><svg viewBox="0 0 32 32" width="32" height="32" fill="none" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2">
  <path d="M12 30 L24 16 12 2" />
</svg>
</a></div>
</div>
</body>

</html>